<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur DETECT - Scl√©rodermie</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Beta Modal -->
    <div id="beta-modal" class="modal">
        <div class="modal-content">
            <h2>üß™ Version Beta Test</h2>
            <p style="font-size: 0.75rem; color: #888; margin: 15px 0;">
                Outil con√ßu par Astouati Quentin. <br>
                L'utilisation et l'interpr√©tation des r√©sultats rel√®vent de la responsabilit√© exclusive du m√©decin
                r√©f√©rent.
            </p>
            <p>L'algorithme est bas√© sur l'article princeps : <br>
                <a href="https://ard.bmj.com/content/73/7/1340" target="_blank" class="link-article">Coghlan JG, et al.
                    Ann Rheum Dis 2014;73:1340‚Äì1349</a>.
            </p>
            <div class="modal-actions">
                <button id="close-modal" class="btn-primary">J'ai compris</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <h1>DETECT <span class="highlight">Online</span></h1>
        <p class="subtitle">Algorithme de d√©pistage de l'HTAP dans la SSc</p>

        <main>
            <!-- STEP 1 SECTION -->
            <section id="step1" class="card">
                <div class="card-header">
                    <h2>√âtape 1 : √âvaluation Clinique</h2>
                </div>

                <div class="form-grid">
                    <!-- FVC -->
                    <div class="input-group">
                        <label for="fvc">CVF (% pr√©dit)</label>
                        <input type="number" id="fvc" step="0.1" placeholder="Ex: 85" autocomplete="off">
                        <small class="hint">Capacit√© Vitale Forc√©e</small>
                    </div>

                    <!-- DLCO -->
                    <div class="input-group">
                        <label for="dlco">DLCO (% pr√©dit)</label>
                        <input type="number" id="dlco" step="0.1" placeholder="Ex: 45" autocomplete="off">
                        <small class="hint">Capacit√© de Diffusion</small>
                        <div id="pts-fvc_dlco" class="points-badge"></div>
                    </div>

                    <!-- Telangiectasias -->
                    <div class="input-group checkbox-group">
                        <label for="telang">T√©langiectasies (Actuelles/Pass√©es)</label>
                        <input type="checkbox" id="telang">
                        <span class="checkmark"></span>
                    </div>

                    <!-- ACA -->
                    <div class="input-group checkbox-group">
                        <label for="aca">Anticorps Anti-Centrom√®re (ACA)</label>
                        <input type="checkbox" id="aca">
                        <span class="checkmark"></span>
                    </div>

                    <!-- NT-proBNP -->
                    <div class="input-group">
                        <label for="ntprobnp">NT-proBNP (pg/mL)</label>
                        <input type="number" id="ntprobnp" step="1" placeholder="Ex: 150" autocomplete="off">
                        <div id="pts-ntprobnp" class="points-badge"></div>
                    </div>

                    <!-- Urate -->
                    <div class="input-group">
                        <label for="urate">Acide Urique (Urate)</label>
                        <div class="multi-input">
                            <input type="number" id="urate" step="0.1" placeholder="Ex: 5.0" autocomplete="off">
                            <select id="urate_unit">
                                <option value="mgdl">mg/100mL (mg/dL)</option>
                                <option value="umol">¬µmol/L</option>
                            </select>
                        </div>
                        <div id="pts-urate" class="points-badge"></div>
                    </div>

                    <!-- RAD -->
                    <div class="input-group checkbox-group">
                        <label for="rad">D√©viation Axiale Droite (ECG)</label>
                        <input type="checkbox" id="rad">
                        <small class="hint">Axe QRS ‚â• 90¬∞</small>
                    </div>
                </div>

                <div class="action-area">
                    <button id="calc-step1" class="btn-primary">Calculer √âtape 1</button>
                </div>

                <!-- Result Area Step 1 -->
                <div id="result-step1" class="result-box hidden">
                    <div class="score-bars">
                        <!-- Nomogram Bar -->
                        <div class="bar-container">
                            <div class="bar-label">
                                <span>Nomogramme (Points)</span>
                                <span class="bar-value"><span id="s1-points-val">--</span> pts</span>
                            </div>
                            <div class="bar-track">
                                <div id="s1-points-bar" class="bar-fill"></div>
                                <div class="cutoff-marker" style="left: 50%" title="Seuil: 300 pts"></div>
                            </div>
                            <div class="bar-legend">Seuil : 300 pts</div>
                        </div>
                    </div>

                    <div class="decision-area">
                        <div class="score-decision" id="s1-decision">--</div>
                        <div id="bypass-s2-area" class="hidden" style="margin-top: 15px;">
                            <button id="btn-force-s2" class="btn-secondary btn-small">ETT r√©alis√© (Forcer √âtape
                                2)</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- STEP 2 SECTION -->
            <section id="step2" class="card hidden">
                <div class="card-header">
                    <h2>√âtape 2 : √âchocardiographie</h2>
                </div>

                <p class="instruction">Indiqu√© car le score √âtape 1 est positif (Risque √©lev√©).</p>

                <div class="form-grid">
                    <!-- Right Atrium Area -->
                    <div class="input-group">
                        <label for="ra_area">Surface de l'Oreillette Droite (cm¬≤)</label>
                        <input type="number" id="ra_area" step="0.1" placeholder="Ex: 16" autocomplete="off">
                        <div id="pts-ra_area" class="points-badge"></div>
                    </div>

                    <!-- TR Velocity -->
                    <div class="input-group">
                        <label for="tr_vel">V√©locit√© IT (Tricuspid Regurgitation) (m/s)</label>
                        <input type="number" id="tr_vel" step="0.1" placeholder="Ex: 2.8" autocomplete="off">
                        <div id="pts-tr_vel" class="points-badge"></div>
                    </div>
                </div>

                <div class="action-area">
                    <button id="calc-step2" class="btn-primary">Calculer √âtape 2 (Final)</button>
                </div>

                <!-- Result Area Step 2 -->
                <div id="result-step2" class="result-box hidden">
                    <div class="score-bars">
                        <!-- Nomogram Bar -->
                        <div class="bar-container">
                            <div class="bar-label">
                                <span>Nomogramme (Points)</span>
                                <span class="bar-value"><span id="s2-points-val">--</span> pts</span>
                            </div>
                            <div class="bar-track">
                                <div id="s2-points-bar" class="bar-fill"></div>
                                <div class="cutoff-marker" style="left: 35%" title="Seuil: 35 pts"></div>
                            </div>
                            <div class="bar-legend">Seuil : 35 pts</div>
                        </div>
                    </div>

                    <div class="decision-area">
                        <div class="score-decision" id="s2-decision">--</div>
                        <div class="recommendation-box" id="s2-rec-box" style="margin-top: 25px; display: none;">
                            <strong>Conclusion :</strong>
                            <p id="final-recommendation">--</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p style="font-size: 0.8rem; margin-bottom: 5px;">Outil DETECT Online - Version Beta</p>
            <p style="font-size: 0.75rem; opacity: 0.7;">Conception : Astouati Quentin</p>
            <p style="font-size: 0.7rem; opacity: 0.6; max-width: 600px; margin: 15px auto; line-height: 1.4;">
                Disclaimer : Cet outil est fourni √† titre indicatif. L'exactitude des r√©sultats n'est pas garantie.
                L'engagement et la responsabilit√© clinique incombent exclusivement au m√©decin r√©f√©rent.
            </p>
        </footer>
    </div>

    <script src="logic.js"></script>
    <script src="app.js"></script>
</body>

</html>
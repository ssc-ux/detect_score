<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur DETECT - Scl√©rodermie</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Beta Modal -->
    <div id="beta-modal" class="modal">
        <div class="modal-content">
            <h2>üß™ Version Beta Test</h2>
            <p style="font-size: 0.75rem; color: #888; margin: 15px 0;">
                Outil con√ßu par Astouati Quentin. <br>
                L'utilisation et l'interpr√©tation des r√©sultats rel√®vent de la responsabilit√© exclusive du m√©decin
                r√©f√©rent.
            </p>
            <p>L'algorithme est bas√© sur l'article princeps : <br>
                <a href="https://ard.bmj.com/content/73/7/1340" target="_blank" class="link-article">Coghlan JG, et al.
                    Ann Rheum Dis 2014;73:1340‚Äì1349</a>.
            </p>
            <div class="modal-actions">
                <button id="close-modal" class="btn-primary"
                    onclick="document.getElementById('beta-modal').style.display='none'">J'ai compris</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <h1>DETECT <span class="highlight">Online</span></h1>
        <p class="subtitle">Algorithme de d√©pistage de l'HTAP dans la SSc</p>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="tab-calculator">üßÆ Calculateur</button>
            <button class="tab-btn" data-tab="tab-nomogram">üìä Source</button>
        </nav>

        <main>
            <!-- TAB 1: CALCULATOR -->
            <div id="tab-calculator" class="tab-content active">

                <!-- STEP 1: CLINICAL EVALUATION -->
                <section id="step1-card" class="card">
                    <div class="card-header">
                        <h2>√âtape 1 : √âvaluation Clinique</h2>
                    </div>

                    <div class="calculator-grid">

                        <!-- FVC / DLCO -->
                        <div class="calc-row">
                            <div class="input-col">
                                <label for="fvc">CVF (% pr√©dit) <span class="tooltip"
                                        title="Capacit√© vitale forc√©e en pourcentage de la valeur pr√©dite (30-150%)">‚ìò</span></label>
                                <input type="number" id="fvc" placeholder="Ex: 90" min="30" max="150">
                            </div>
                            <div class="input-col">
                                <label for="dlco">DLCO (% pr√©dit) <span class="tooltip"
                                        title="Capacit√© de diffusion du CO en pourcentage de la valeur pr√©dite (10-150%)">‚ìò</span></label>
                                <input type="number" id="dlco" placeholder="Ex: 50" min="10" max="150">
                            </div>
                            <div class="points-col">
                                <span class="points-label">Points</span>
                                <span id="pts-fvc_dlco" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- TELANGIECTASIAS -->
                        <div class="calc-row">
                            <div class="input-col full-width">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="telang">
                                    <span class="checkmark"></span>
                                    <span class="label-text">T√©langiectasies (Actuelles ou Pass√©es)</span>
                                </label>
                            </div>
                            <div class="points-col">
                                <span id="pts-telang" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- ACA -->
                        <div class="calc-row">
                            <div class="input-col full-width">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="aca">
                                    <span class="checkmark"></span>
                                    <span class="label-text">Anticorps Anti-Centrom√®re (ACA)</span>
                                </label>
                            </div>
                            <div class="points-col">
                                <span id="pts-aca" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- NT-proBNP -->
                        <div class="calc-row">
                            <div class="input-col">
                                <label for="ntprobnp">NT-proBNP (pg/mL) <span class="tooltip"
                                        title="Peptide natriur√©tique de type B, marqueur de stress cardiaque (10-35000 pg/mL)">‚ìò</span></label>
                                <input type="number" id="ntprobnp" placeholder="Ex: 150" min="10" max="35000">
                            </div>
                            <div class="points-col">
                                <span id="pts-ntprobnp" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- URATE -->
                        <div class="calc-row">
                            <div class="input-col">
                                <label for="urate">Acide Urique <span class="tooltip"
                                        title="Uric√©mie s√©rique (2-12 mg/dL ou 120-720 ¬µmol/L)">‚ìò</span></label>
                                <div class="input-wrapper">
                                    <input type="number" id="urate" placeholder="Ex: 5.0" min="2" max="12" step="0.1">
                                    <select id="urate_unit" class="unit-select">
                                        <option value="mgdl">mg/dL</option>
                                        <option value="umol">¬µmol/L</option>
                                    </select>
                                </div>
                            </div>
                            <div class="points-col">
                                <span id="pts-urate" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- AXIS DEVIATION -->
                        <div class="calc-row">
                            <div class="input-col full-width">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="rad">
                                    <span class="checkmark"></span>
                                    <span class="label-text">D√©viation Axiale Droite (ECG)</span>
                                </label>
                            </div>
                            <div class="points-col">
                                <span id="pts-rad" class="points-value">--</span>
                            </div>
                        </div>

                    </div>

                    <!-- STEP 1 ACTIONS -->
                    <div class="action-bar">
                        <button id="calc-step1" class="btn-primary">Calculer Risque √âtape 1</button>
                        <button id="reset-form" class="btn-secondary" style="margin-left: 10px;">üîÑ
                            R√©initialiser</button>
                    </div>

                    <!-- STEP 1 RESULT -->
                    <!-- STEP 1 RESULT -->
                    <div id="result-step1" class="result-box hidden">
                        <div class="gauge-wrapper">
                            <div class="gauge-row">
                                <span class="gauge-title">Score √âtape 1</span>
                                <div class="gauge-track-container">
                                    <div class="gauge-track">
                                        <div id="s1-gauge-cursor" class="gauge-cursor"></div>
                                        <div class="gauge-cutoff" style="left: 60%"></div>
                                    </div>
                                    <span class="cutoff-label" style="left: 60%">Seuil 300</span>
                                </div>
                                <span class="gauge-score" id="s1-points-val">--</span>
                            </div>
                            <div class="gauge-decision-line" id="s1-decision">--</div>
                            <div class="precise-result" id="precise-step1">
                                <span class="label">R√©sultat Pr√©cis :</span>
                                <span class="val">Score <span id="s1-exact-score">--</span> | Risque <span
                                        id="s1-exact-prob">--</span>%</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- CONDITIONAL: FORCE STEP 2 (When Step 1 is Low Risk) -->
                <div id="bypass-s2-area" class="bypass-area hidden">
                    <p class="bypass-msg">Le risque calcul√© est faible. Cependant, si une √©chocardiographie a √©t√©
                        r√©alis√©e pour une autre raison :</p>
                    <button id="btn-force-s2" class="btn-secondary">Saisir les donn√©es √âcho</button>
                </div>

                <!-- STEP 2: ECHOCARDIOGRAPHY -->
                <section id="step2-card" class="card hidden">
                    <div class="card-header">
                        <h2>√âtape 2 : √âchocardiographie</h2>
                        <div id="step1-reminder" class="step1-reminder">
                            Score √âtape 1 : <strong id="step1-carried-score">--</strong> pts
                        </div>
                    </div>

                    <div class="calculator-grid">

                        <!-- RIGHT ATRIUM AREA -->
                        <div class="calc-row">
                            <div class="input-col">
                                <label for="ra_area">Surface OD (cm¬≤) <span class="tooltip"
                                        title="Surface de l'oreillette droite mesur√©e en vue apicale 4 cavit√©s (5-40 cm¬≤)">‚ìò</span></label>
                                <input type="number" id="ra_area" placeholder="Ex: 16" min="5" max="40" step="0.1">
                            </div>
                            <div class="points-col">
                                <span class="points-label">Points</span>
                                <span id="pts-ra_area" class="points-value">--</span>
                            </div>
                        </div>

                        <!-- TR VELOCITY -->
                        <div class="calc-row">
                            <div class="input-col">
                                <label for="tr_vel">V√©locit√© IT (m/s) <span class="tooltip"
                                        title="Vitesse maximale du jet de r√©gurgitation tricuspide (1.5-5.0 m/s)">‚ìò</span></label>
                                <input type="number" id="tr_vel" placeholder="Ex: 2.8" min="1.5" max="5.0" step="0.1">
                            </div>
                            <div class="points-col">
                                <span id="pts-tr_vel" class="points-value">--</span>
                            </div>
                        </div>

                    </div>

                    <!-- STEP 2 ACTIONS -->
                    <div class="action-bar">
                        <button id="calc-step2" class="btn-primary">Calculer R√©sultat Final</button>
                    </div>

                    <!-- STEP 2 RESULT (FINAL) -->
                    <div id="result-step2" class="result-box hidden">
                        <div class="gauge-wrapper">
                            <div class="gauge-row">
                                <span class="gauge-title">Score Final</span>
                                <div class="gauge-track-container">
                                    <div class="gauge-track">
                                        <div id="s2-gauge-cursor" class="gauge-cursor"></div>
                                        <div class="gauge-cutoff" style="left: 43.75%"></div>
                                    </div>
                                    <span class="cutoff-label" style="left: 43.75%">Seuil 35</span>
                                </div>
                                <span class="gauge-score" id="s2-points-val">--</span>
                            </div>
                            <div class="gauge-decision-line" id="s2-decision">--</div>
                            <div class="precise-result" id="precise-step2">
                                <span class="label">R√©sultat Pr√©cis :</span>
                                <span class="val">Score <span id="s2-exact-score">--</span> | Risque <span
                                        id="s2-exact-prob">--</span>%</span>
                            </div>
                            <div class="gauge-recommendation" id="final-recommendation">--</div>
                        </div>
                    </div>

                </section>
            </div>

            <!-- TAB 2: NOMOGRAM SOURCE -->
            <div id="tab-nomogram" class="tab-content">
                <section class="card">
                    <div class="card-header">
                        <h2>Source du Calcul</h2>
                    </div>

                    <div class="nomogram-display">
                        <p>L'algorithme DETECT est bas√© sur le nomogramme valid√© dans l'√©tude princeps.</p>

                        <div style="text-align: center; margin: 20px 0;">
                            <img src="nomogramme.png" alt="Nomogramme DETECT - Figure 3" class="nomogram-image"
                                style="max-width: 100%; border-radius: 12px; box-shadow: var(--shadow);">
                            <div style="margin-top: 15px;">
                                <a href="nomogramme.png" target="_blank" class="btn-secondary"
                                    style="text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                                    üîç Voir l'image en taille r√©elle
                                </a>
                            </div>
                        </div>

                        <div class="reference-box">
                            <strong>R√©f√©rence :</strong><br>
                            Coghlan JG, Denton CP, Gr√ºnig E, et al. <br>
                            <em>Evidence-based detection of pulmonary arterial hypertension in systemic sclerosis: the
                                DETECT study.</em><br>
                            Ann Rheum Dis 2014;73:1340‚Äì1349.
                        </div>

                        <p style="margin-top:20px; font-size:0.9rem;">
                            <strong>Note :</strong> Ce calculateur en ligne reproduit fid√®lement les points attribu√©s
                            par ce nomogramme pour chaque variable, assurant une concordance parfaite avec la m√©thode
                            papier.
                        </p>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p style="font-size: 0.8rem; margin-bottom: 5px;">Outil DETECT Online - Version Beta</p>
            <p style="font-size: 0.75rem; opacity: 0.7;">Conception : Astouati Quentin</p>
            <p style="font-size: 0.7rem; opacity: 0.6; max-width: 600px; margin: 15px auto; line-height: 1.4;">
                Disclaimer : Cet outil est fourni √† titre indicatif. L'exactitude des r√©sultats n'est pas garantie.
                L'engagement et la responsabilit√© clinique incombent exclusivement au m√©decin r√©f√©rent.
            </p>
        </footer>
    </div>

    <script src="logic.js"></script>
    <script src="app.js"></script>
    <!-- Deployment trigger: 2026-02-10T07:55:00 -->
</body>

</html>